// Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ + Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ
const questionsData = {
  ar: [
    "ÙƒÙ… Ø³Ø§Ø¹Ø© ØªÙ‚Ø¶ÙŠÙ‡Ø§ ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ TikTok / Reels / ShortsØŸ",
    "Ù‡Ù„ ØªÙØªØ­ Ù‡Ø°Ù‡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¨Ø´ÙƒÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø¨Ø¯ÙˆÙ† ØªÙÙƒÙŠØ±)ØŸ",
    "Ù‡Ù„ ØªØ¬Ø¯ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ø§Ù„ØªÙˆÙ‚Ù Ø¨Ø¹Ø¯ Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ù‚Ø·Ø¹ Ù‚ØµÙŠØ± ÙˆØ§Ø­Ø¯ØŸ",
    "Ù‡Ù„ ØªØ´Ø§Ù‡Ø¯ Ù…Ù‚Ø§Ø·Ø¹ Ù‚ØµÙŠØ±Ø© Ø­ØªÙ‰ ÙˆØ£Ù†Øª ØªØ¹Ø±Ù Ø£Ù† Ø¹Ù†Ø¯Ùƒ Ù…Ù‡Ø§Ù… Ø£Ù‡Ù…ØŸ",
    "Ø¨Ø¹Ø¯ Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ø­ØªÙˆÙ‰ Ù‚ØµÙŠØ±ØŒ Ù‡Ù„ ØªØ¬Ø¯ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©/Ø§Ù„Ø¹Ù…Ù„ØŸ",
    "Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù† Ø°Ø§ÙƒØ±ØªÙƒ Ø¶Ø¹ÙØª Ø£Ùˆ ØªÙ†Ø³Ù‰ Ø¨Ø³Ø±Ø¹Ø© Ø¨Ø¹Ø¯ ÙØªØ±Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø·ÙˆÙŠÙ„Ø©ØŸ",
    "Ù‡Ù„ ØªÙˆØ§Ø¬Ù‡ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© ÙƒØªØ§Ø¨ Ø£Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ø© ÙÙŠÙ„Ù… Ø·ÙˆÙŠÙ„ Ø¨Ø³Ø¨Ø¨ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„ØµØ¨Ø±ØŸ",
    "Ù‡Ù„ ØªÙ„Ø§Ø­Ø¸ Ø£Ù† Ø§Ù†ØªØ¨Ø§Ù‡Ùƒ ÙŠØªØ´ØªØª Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø£ÙƒØ«Ø± Ù…Ù† Ù‚Ø¨Ù„ØŸ",
    "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨ÙØ±Ø§Øº Ø£Ùˆ â€œØ¯Ù…Ø§ØºÙƒ ÙØ§Ø¶ÙŠâ€ Ø¨Ø¹Ø¯ Ø³Ø§Ø¹Ø§Øª Ù…Ù† Ø§Ù„ØªØµÙØ­ØŸ",
    "Ù‡Ù„ ÙŠØ¬ÙŠÙƒ Ø¥Ø­Ø³Ø§Ø³ Ø¨Ø§Ù„Ø°Ù†Ø¨ Ø£Ùˆ Ø§Ù„Ù†Ø¯Ù… Ø¨Ø¹Ø¯ Ù‚Ø¶Ø§Ø¡ ÙˆÙ‚Øª Ø·ÙˆÙŠÙ„ ÙÙŠ Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹ Ø§Ù„Ù‚ØµÙŠØ±Ø©ØŸ",
    "Ù‡Ù„ ØªØ¬Ø¯ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ…ØªØ§Ø¹ Ø¨Ø£Ù†Ø´Ø·Ø© Ø¹Ø§Ø¯ÙŠØ© Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŸ",
    "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨Ø§Ù„Ù‚Ù„Ù‚ Ø£Ùˆ Ø§Ù„ØªÙˆØªØ± Ù„Ùˆ Ù„Ù… ØªÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù„ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø©ØŸ",
    "Ù‡Ù„ ÙŠØ¤Ø«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ø¹Ù„Ù‰ Ù†ÙˆÙ…Ùƒ (ØªØ£Ø®Ø± Ù†ÙˆÙ…ØŒ Ù†ÙˆÙ… Ù…ØªÙ‚Ø·Ø¹)ØŸ",
    "Ù‡Ù„ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø¥Ù†Ø¬Ø§Ø²Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø£Ùˆ Ø§Ù„Ù…Ù‡Ù†ÙŠØŸ",
    "Ù‡Ù„ ØªØ¬Ø¯ Ù†ÙØ³Ùƒ ØªØ¹Ø·ÙŠ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ Ø¹Ù„Ø§Ù‚Ø§ØªÙƒ Ø£Ùˆ Ù†Ø´Ø§Ø·Ø§ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©ØŸ",
    "Ù‡Ù„ Ø­Ø§ÙˆÙ„Øª ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆÙØ´Ù„ØªØŸ (Ù†Ø¹Ù…/Ù„Ø§)"
  ],
  en: [
    "How many hours do you spend daily on TikTok / Reels / Shorts?",
    "Do you open these apps automatically (without thinking)?",
    "Do you find it hard to stop after one short video?",
    "Do you watch shorts even when you know you have more important tasks?",
    "After watching short content, do you struggle to focus on work/study?",
    "Do you feel your memory weakened after long use?",
    "Do you struggle to read a book or watch a full movie patiently?",
    "Do you notice your attention gets distracted more easily?",
    "Do you feel empty or 'mind blank' after hours of scrolling?",
    "Do you feel guilt/regret after long time on short videos?",
    "Do you struggle to enjoy normal activities compared to videos?",
    "Do you feel anxious if you donâ€™t open the apps for long?",
    "Does your usage affect your sleep (delay, interruptions)?",
    "Does it affect your academic or work performance?",
    "Do you prioritize digital content over relationships or daily tasks?",
    "Have you tried to reduce usage and failed? (Yes/No)"
  ]
};

let currentLang = "ar";

// ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
function renderQuestions() {
  const questionsDiv = document.getElementById("questions");
  questionsDiv.innerHTML = "";

  questionsData[currentLang].forEach((q, i) => {
    const qDiv = document.createElement("div");
    qDiv.classList.add("q");
    qDiv.innerHTML = `<h3>${i+1}. ${q}</h3>`;

    // Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø®ÙŠØ± (Ù†Ø¹Ù…/Ù„Ø§ ÙÙ‚Ø·)
    if (i === 15) {
      qDiv.innerHTML += `
        <div class="options">
          <label><input type="radio" name="q${i}" value="5"> ${currentLang==="ar" ? "Ù†Ø¹Ù…" : "Yes"}</label>
          <label><input type="radio" name="q${i}" value="1"> ${currentLang==="ar" ? "Ù„Ø§" : "No"}</label>
        </div>
      `;
    } else {
      let opts = "";
      for (let v=1; v<=5; v++) {
        opts += `<label><input type="radio" name="q${i}" value="${v}"> ${v}</label>`;
      }
      qDiv.innerHTML += `<div class="options">${opts}</div>`;
    }

    questionsDiv.appendChild(qDiv);
  });
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
function calcResult() {
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();

  let total = 0, answered = 0, breakdown = "";
  for (let i=0; i<questionsData[currentLang].length; i++) {
    const sel = document.querySelector(`input[name="q${i}"]:checked`);
    if (sel) {
      answered++;
      total += parseInt(sel.value);
      breakdown += `<p>${i+1}. ${questionsData[currentLang][i]} â†’ <b>${sel.value}</b></p>`;
    }
  }

  if (answered < 16) {
    alert(currentLang==="ar" ? "Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©" : "Please answer all questions");
    return;
  }

  const percent = Math.round((total/80)*100);
  let plan = "";
  if (percent < 40) plan = currentLang==="ar" ? "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø·Ø¨ÙŠØ¹ÙŠ ğŸ‘" : "Normal use ğŸ‘";
  else if (percent < 70) plan = currentLang==="ar" ? "Ø¹Ù„Ø§Ù…Ø§Øª Ù…ØªÙˆØ³Ø·Ø© â€“ Ø­Ø§ÙˆÙ„ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… â³" : "Moderate signs â€“ try reducing use â³";
  else plan = currentLang==="ar" ? "Ù…Ø³ØªÙˆÙ‰ Ø¹Ø§Ù„ÙŠ âš ï¸ ÙŠÙÙØ¶Ù„ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø®ØªØµ" : "High level âš ï¸ consider professional help";

  document.getElementById("resultSummary").innerHTML = `
    <h3>${currentLang==="ar" ? "Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙƒÙ„ÙŠØ©" : "Total Score"}: ${total}/80 (${percent}%)</h3>
  `;
  document.getElementById("breakdown").innerHTML = breakdown;
  document.getElementById("plan").innerHTML = `<p>${plan}</p>`;
  document.getElementById("resultCard").style.display = "block";

  // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª
  fetch("YOUR_GOOGLE_SCRIPT_URL", {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name, phone, total, percent, lang: currentLang })
  });
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
document.getElementById("langToggle").addEventListener("click", () => {
  currentLang = (currentLang === "ar") ? "en" : "ar";
  document.body.classList.toggle("en", currentLang==="en");
  document.getElementById("langToggle").innerText = currentLang==="ar" ? "EN" : "AR";
  document.getElementById("title").innerText = currentLang==="ar" ? "Ù…Ù‚ÙŠØ§Ø³ Brain Rot â€“ BRS" : "Brain Rot Scale â€“ BRS";
  document.getElementById("intro").innerText = currentLang==="ar"
    ? "Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ ÙÙ‡Ù… ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹ Ø§Ù„Ù‚ØµÙŠØ±Ø© Ø¹Ù„Ù‰ ØªØ±ÙƒÙŠØ²Ùƒ ÙˆØ°Ø§ÙƒØ±ØªÙƒ ÙˆØµØ­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ©."
    : "This test helps you understand the effect of short videos on your focus, memory, and mental health.";
  renderQuestions();
});

// Ø²Ø± Ø§Ù„Ø­Ø³Ø§Ø¨
document.getElementById("submitBtn").addEventListener("click", calcResult);

// ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ Ù…Ø±Ø©
renderQuestions();